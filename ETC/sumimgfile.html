<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>✨이미지파일 합치기</title>
    <link
      href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css"
      rel="stylesheet"
    />
</head>
<style>
    body {
        margin: 10px;
    }
    img {
        width: 100%;
    }
    form {
        margin-bottom: 15px;
        padding-left: 15px;
        margin-left: 10px;
      }
      
      #merged-image {
        width: 100%;
        height: auto;
        margin-top: 20px;
      }
      input[type="file"] {
        margin-bottom: 10px;
        border-radius: 5px;
        padding: 5px;
      } 
      input {
        margin-bottom: 10px;
        border-radius: 5px;
        padding: 5px;
        border: none;
      } 
      button {
        margin-bottom: 10px;
        border-radius: 5px;
        font-size: larger;
        border: none;
        padding: 5px;
        background-color: tomato;
        color: whitesmoke;
        font-family: Arial, Helvetica, sans-serif;
        font-weight: 600;
        box-shadow: 0px 3px 6px grey;
      } 
      #plus {
        display: none;
      }
      .center {
        text-align: center;
      }        
</style>
<body>
    <div class="center">
    <h3>✨Image 합치기</h3>
    </div>
    <hr>
    <h4>📢아래에서 이미지파일을 선택하신후 실행 바랍니다. </h4>
    <div>
      <input type="file" id="file-input-1">
      <input type="file" id="file-input-2">
      <input type="file" id="file-input-3">
      <input type="file" id="file-input-4">
      <input type="file" id="file-input-5">
      <input type="file" id="file-input-6">
      <!-- 이미지파일 로드 추가 설정 5개 -->
      <div id="plusimg" style="display:none;">
        <input type="file" id="file-input-7">
        <input type="file" id="file-input-8">
        <input type="file" id="file-input-9">
        <input type="file" id="file-input-10">
        <input type="file" id="file-input-11">
      </div>
      <input id="plusbtn" type="button" value="➕이미지파일 더 추가하기" onclick="plusbtn()">
      <hr>
      <button onclick="mergeImages()">🚀이미지 합치기</button>
    </div>
    <div id="merged-image"></div>
    <script>
        function plusbtn() {
            document.getElementById('plusimg').style.display='block';
            document.getElementById('plusbtn').style.display='none';
            alert('🚀5개의 이미지 파일을 더 추가하실 수 있습니다.(총11개 파일 추가 가능)')
        }

        function mergeImages() {
            var inputs = document.querySelectorAll('input[type="file"]');
            var images = [];
            for (var i = 0; i < inputs.length; i++) {
              var input = inputs[i];
              if (input.files.length > 0) {
                for (var j = 0; j < input.files.length; j++) {
                  images.push(input.files[j]);
                }
              }
            }
            if (images.length == 0) {
              alert('이미지 파일을 선택하세요.');
              return;
            }
            var maxWidth = 0;
            var totalHeight = 0;
            var loadedCount = 0;
            var canvas = document.createElement('canvas');
            var ctx = canvas.getContext('2d');
            for (var i = 0; i < images.length; i++) {
              var image = new Image();
              image.onload = function() {
                if (this.width > maxWidth) {
                  maxWidth = this.width;
                }
                totalHeight += this.height;
                loadedCount++;
                if (loadedCount == images.length) {
                  canvas.width = maxWidth;
                  canvas.height = totalHeight;
                  var y = 0;
                  for (var i = 0; i < images.length; i++) {
                    var image = new Image();
                    image.onload = function() {
                      var x = (maxWidth - this.width) / 2;
                      ctx.drawImage(this, x, y);
                      y += this.height;
                      if (y == totalHeight) {
                        var dataURL = canvas.toDataURL('image/png');
                        var mergedImage = document.createElement('img');
                        mergedImage.src = dataURL;
                        var mergedImageDiv = document.getElementById('merged-image');
                        mergedImageDiv.innerHTML = '';
                        mergedImageDiv.appendChild(mergedImage);
                      }
                    };
                    image.src = URL.createObjectURL(images[i]);
                  }
                }
              };
              image.src = URL.createObjectURL(images[i]);
            }
          }                             
    </script>
</body>
</html>