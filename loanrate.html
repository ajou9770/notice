
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=0.8" />
    <title>월 대출 원리금 계산하기</title>
    <style>
      body {
        display:flex;
        flex-direction: column;
        justify-content: center;
        background-color: ivory;
        vertical-align: middle;
        height: auto;
        padding-left: 10PX;
      }
      input {
        height: 50px;
      }
      select {
        height: 50px;
      }
      aside {
        position: absolute;
        top: 200px;
        font-size:x-large;
        border-radius: 10px;
        font-weight: 500;
        font-family: Arial, Helvetica, sans-serif;
        border-style: solid;
        border-width: 1px 6px 6px 1px;
        border-color: rgb(128, 128, 128);
        z-index: 1;
        width: 86%;
        height: 800px;
        overflow-y: scroll;
        padding: 10px;
        background-color: rgb(213, 222, 223);
      }
      #period_year {
        width: 15%;
        height: 50px;
        border-radius: 10px;
        font-size: 20px;
        font-weight: 600;
      }
      #period_month {
        width: 15%;
        height: 50px;
        border-radius: 10px;
        font-size: 20px;
        font-weight: 600;
      }
      .dan {
        width: 35%;
        height: 50px;
        border-radius: 10px;
        font-size: 20px;
        font-weight: 600;
      }
      #amount {
        width: 30%;
        height: 50px;
        border-radius: 10px;
        font-size: 20px;
        font-weight: 600;
      }
      #method {
        width: 35%;
        height: 50px;
        border-radius: 10px;
        font-size: 20px;
        font-weight: 600;
      }
      #change {
        width: 35%;
        height: 50px;
        border-radius: 10px;
        font-size: 20px;
        font-weight: 600;
      }
      #whether {
        width: 45%;
        height: 50px;
        border-radius: 10px;
        font-size: 20px;
        font-weight: 600;
      }
      #rating {
        width: 90%;
        height: 50px;
        border-radius: 10px;
        font-size: 20px;
        font-weight: 600;
      }
      .cal {
        width: 150px;
        height: 50px;
        border-radius: 10px;
        font-size: 20px;
        font-weight: 600;
      }
      .cal :active {
        transform: scale(0.98);
      }
      #submit {
        margin-top: 20px;
        margin-left: 10px;
        margin-right: 10px;
        width: 300px;
        height: auto;
        padding: 10px;
        background-color: rgb(3, 34, 35);
        font-family: Arial, Helvetica, sans-serif;
        font-weight: 600;
        font-size: larger;
        height: auto;
        display: flex;
        justify-content: center;
      }
      #submit:active {
        transform: scale(0.98);
      }
      .result {
       height: auto;
       width: 410px;
       color: blue;
       border-width: 5px 2px;
       border-color: whitesmoke;
       border-style: solid;
       text-align: left;
       background-color: whitesmoke;
       opacity: 0.8;
       padding-left: 10px;
       border-radius: 10px;
     }
     .seetermrate {
      display: flex;
      width: 380px;
      font-weight: 600;
      font-size: large;
      color: rgb(37, 37, 143);
      height: auto;
      border-width: 1px 1px;
      border-style: solid;
      border-color: whitesmoke;
      margin-right: 10px;
      align-items: center;
      justify-content: center;
     }
     .resultmile {
      height: auto;
      width: 410px;
      color: chocolate;
      font-size: 25px;
      border-width: 5px 2px;
      border-color: teal wheat;
      border-style: solid;
      text-align: left;
      background-color: whitesmoke;
      opacity: 0.8;
      padding-top: 10px;
      padding-bottom: 10px;
      padding-left: 10px;
      border-radius: 10px;
     }
  .loaninsu {
  background-color:indianred;
  text-align: center;
  justify-content: center;
  align-items: center;
  padding-top: 5px;
  padding-bottom: 5px;
  border-radius: 10px;
  opacity: 0.8;
  height: auto;
  width: 350px;
  font-size: 20px;
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  font-weight: 700;
  color: snow;
  margin-bottom: 5px;
}
.loaninsu:active {
        transform: scale(0.98);
        }
.mile {
  background-color: darkcyan;
  text-align: center;
  justify-content: center;
  align-items: center;
  padding-top: 5px;
  padding-bottom: 5px;
  border-radius: 10px;
  opacity: 0.8;
  height: auto;
  width: 350px;
  font-size: 10px;
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  font-weight: 700;
  color: snow;
  margin-bottom: 5px;
}
.mile:active {
        transform: scale(0.98);
        }
.mile a {
  color: white;
  text-decoration: none;
  font-weight: 700;
  font-size: 20px;
}
.mile a:active {
        transform: scale(0.98);
}
.loaninsu a {
  color: white;
  text-decoration: none;
  font-weight: 700;
  font-size: 20px;
}
.loaninsu a:active {
        transform: scale(0.98);
        }
.none {
  display: none;
}
a:active {
        transform: scale(0.98);
        }
        .backButton {
	box-shadow: 3px 4px 0px 0px #1564ad;
	background:linear-gradient(to bottom, #79bbff 5%, #378de5 100%);
	background-color:#79bbff;
	border-radius:4px;
  text-align: center;
	display:inline-block;
	cursor:pointer;
	color:#ffffff;
	font-family:Arial;
	font-size:25px;
	font-weight:bold;
	padding:12px 44px;
	text-decoration:none;
	text-shadow:3px 1px 0px #528ecc;
}
.backButton {
	box-shadow: 3px 4px 0px 0px #1564ad;
	background:linear-gradient(to bottom, #79bbff 5%, #378de5 100%);
	background-color:#79bbff;
	border-radius:4px;
  text-align: center;
  width: 50%;
	display:inline-block;
	cursor:pointer;
	color:#ffffff;
	font-family:Arial;
	font-size:20px;
	font-weight:bold;
	padding:12px 44px;
	text-decoration:none;
	text-shadow:3px 1px 0px #528ecc;
}
.backButton:hover {
	background:linear-gradient(to bottom, #378de5 5%, #79bbff 100%);
	background-color:#378de5;
}
.backButton:active {
	position:relative;
	top:1px;
}
#subtitle_css {
    color: #444444;
    background: #FFFFFF;
    text-shadow: 1px 0px 1px #CCCCCC, 0px 1px 1px #EEEEEE, 2px 1px 1px #CCCCCC, 1px 2px 1px #EEEEEE, 3px 2px 1px #CCCCCC, 2px 3px 1px #EEEEEE, 4px 3px 1px #CCCCCC, 3px 4px 1px #EEEEEE, 5px 4px 1px #CCCCCC, 4px 5px 1px #EEEEEE, 6px 5px 1px #CCCCCC, 5px 6px 1px #EEEEEE, 7px 6px 1px #CCCCCC;
    color: #444444;
    background: ivory;
    text-align: center;
    border-top: solid gray 2px;
    border-bottom: solid gray 2px;
    padding: 10px;
    }
    .Button_blue a {
	box-shadow: 0px 0px 0px 2px #9fb4f2;
	background:linear-gradient(to bottom, #7892c2 5%, #476e9e 100%);
	background-color:#7892c2;
	border-radius:10px;
	border:1px solid #4e6096;
	display:inline-block;
  text-align: center;
	cursor:pointer;
  width: 50%;
	color:#ffffff;
	font-family:Arial;
	font-size:17px;
	font-weight:bold;
	padding:12px 37px;
	text-decoration:none;
	text-shadow:0px 1px 0px #283966;
}
.Button_blue a:hover {
	background:linear-gradient(to bottom, #476e9e 5%, #7892c2 100%);
	background-color:#476e9e;
}
.Button_blue a:active {
	position:relative;
	top:1px;
}
.Button_blue {
	box-shadow: 0px 0px 0px 2px #9fb4f2;
	background:linear-gradient(to bottom, #7892c2 5%, #476e9e 100%);
	background-color:#7892c2;
	border-radius:10px;
	border:1px solid #4e6096;
	display:inline-block;
  text-align: center;
	cursor:pointer;
  width: 50%;
	color:#ffffff;
	font-family:Arial;
	font-size:20px;
	font-weight:bold;
	padding:12px 37px;
	text-decoration:none;
	text-shadow:0px 1px 0px #283966;
}
.Button_blue:active {
  transform: scale(0.98);
}
.Button_blue_link a{
	box-shadow: 0px 0px 0px 2px #9fb4f2;
	background:linear-gradient(to bottom, #7892c2 5%, #476e9e 100%);
	background-color:#7892c2;
	border-radius:10px;
	border:1px solid #4e6096;
	display:inline-block;
  text-align: center;
	cursor:pointer;
  width: 70%;
	color:#ffffff;
	font-family:Arial;
	font-size:20px;
	font-weight:bold;
	padding:12px 37px;
	text-decoration:none;
	text-shadow:0px 1px 0px #283966;
}
.Button_blue_link a :hover {
	background:linear-gradient(to bottom, #476e9e 5%, #7892c2 100%);
	background-color:#476e9e;
}
.Button_blue_link a :active {
	position:relative;
	top:1px;
}         
    </style>
  </head>
  <body>
    <h1 id="subtitle_css"> 대출원리금 셀프 계산기 </h1>
    <h2> ✔️ 아래, 1 ~ 6에 입력 또는 선택 하신 후 하단의 "<mark style="background: linear-gradient(to top,  rgb(230, 160, 9) 5%, transparent 20%);">계산하기</mark>" 버튼을 클릭하세요</h2>
    <h3>✅ 기본조건: 신협 급여이체 및 참조합원(으뜸이 등급) (선)적용 가정</h3>
    <form>
      <section>
        <h2>1.대출금액을 입력하세요</h2>
        <input id="amount" type="number" required />
        <span class="dan">만원</span>
      </section>
      <section>
        <h2>2. 대출기간을 선택해 주세요</h2>
        <select id="period_year">
          <option value="0">0</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
        </select>
        <span class="dan">년</span>
        <select id="period_month">
          <option value="0">0</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
          <option value="7">7</option>
          <option value="8">8</option>
          <option value="9">9</option>
          <option value="10">10</option>
          <option value="11">11</option>
        </select>
        <span class="dan">개월</span>
      </section>
      <h3><mark style="background: linear-gradient(to top,  rgb(230, 160, 9) 5%, transparent 20%);">※신용대출 일시상환은 대출기간은 최장 2년까지 입니다. </mark></h3>
      <section>
        <h2>3. 상환 방법을 선택하세요.</h2>
        <select id="method">
          <option value="1">만기일시상환</option>
          <option value="2">원금분할상환(0.1%우대)</option>
        </select>
        <h3>※ 만기전 중도에 일부 또는 전부 상환이 가능합니다. <br/>
        <mark style="background: linear-gradient(to top,  rgb(230, 160, 9) 5%, transparent 20%);"> ☞ 신협은 중도 상환 수수료가 부과되지 않습니다.</mark></h3>
      </section>
      <section>
        <h2>4. 금리변동주기(변동금리 또는 고정금리)을 선택하세요</h2>
        <select id="change">
          <option value="1">3개월 변동</option>
          <option value="2">6개월 변동</option>
          <option value="3">12개월 변동(0.1% 가산)</option>
          <option value="4">고정 금리(0.2% 가산)</option>
        </select>
      </section>
      <section>
        <h2>5. 신협 최초 대출 여부를 선택하세요.</h2>
        <select id="whether">
          <option value="1">신입교직원최초(0.5%우대)</option>
          <option value="2">해당없음</option>
        </select>
        <h3><mark style="background: linear-gradient(to top, rgb(230, 160, 9) 5%, transparent 20%);">※ 최초대출 대상자: 입사일기준 1년 미만 조합원</mark></h3>
      </section>
      <section>
        <h2>6. 본인의 개인신용평점을 선택하세요.</h2>
        <h3>※ NCB(나이스 신용평가) 개인신용평점 기준</h3>
        <select id="rating">
          <option value="1">우량 평점구간: 880점 ~ 1,000점</option>
          <option value="2">일반 평점구간: 740점 ~ 879점</option>
        </select>
      </section><hr>
        <input class="Button_blue" type="submit" value="계산하기(￦)" />
      <h3>※ 산출된 금리 및 원리금은 참고용으로만 활용바랍니다.</h3>
    </form>
    <div class="result">
    <main class="none">
      <h2 id="rate"></h2>
      <h2 id="result"></h2></div>
      <div class="seetermrate">
      <h2 id="detail" class="none">☞ 회차별 원리금 조회하기</h2></div>
      <h2 class="resultmile" id="dividend"></h2>
    </main>
    <aside class="none"></aside>
    <h3 class="mark_three">
        ※ 대출기간이 1년미만이거나, 중도상환할 경우 이용고 배당 금액은 달라 질 수 있습니다.<br/>
        ※ 이용고배당은 대출금평잔과 대출관련 기타이용 실적이 포함되어 매년(2월경) 지급 됩니다.
      </h3><br/>
      <div style="text-align: center;">
      <div class="Button_blue_link">
        <a href="http://ajou9770.github.io/notice/loanlimit.html">
            셀프 대출한도 조회하기<i class="fas fa-chevron-right fa-lg"></i>
         </a></div><br/> 
      <div class="Button_blue_link">
      <a href="http://ajou9770.github.io/notice/loaninsu.html">
         보증대출 보증보험료 조회하기<i class="fas fa-chevron-right fa-lg"></i>
      </a></div><br/>
        <a href="http://ajou9770.github.io/usertip/loan.html" class="backButton">
          <i class="fas fa-chevron-left fa-lg"></i> 이전화면 돌아가기
        </a>
        </div>
    <br/>
    <script>
      const form = document.querySelector("form");
      const aside = document.querySelector("aside");
      const main = document.querySelector("main");
      const amount = form.querySelector("#amount");
      const periodYear = form.querySelector("#period_year");
      const periodMonth = form.querySelector("#period_month");
      const method = form.querySelector("#method");
      const rating = form.querySelector("#rating");
      const whether = form.querySelector("#whether");
      const change = form.querySelector("#change");
      const rate = document.querySelector("#rate");
      const result = document.querySelector("#result");
      const detail = document.querySelector("#detail");
      const dividend = document.querySelector("#dividend");
      const CLASS_NONE = "none";
      detail.on = false;

      function calculate(evemt) {
        event.preventDefault();
        aside.innerHTML = "";
        let BASE_RATE = 0.058; // **기준금리(금리변경시 수정요망.)
        detail.on = false;
        main.classList.remove(CLASS_NONE);
        let amountValue = amount.value * 10000;
        const periodYearValue = parseInt(periodYear.value);
        const periodMonthValue = parseInt(periodMonth.value);
        const allMonth = periodYearValue * 12 + periodMonthValue;
        const methodValue = parseInt(method.value);
        const whetherValue = parseInt(whether.value);
        const ratingValue = parseInt(rating.value);
        const changeValue = parseInt(change.value);

        if (allMonth > 60 || allMonth < 1) {
          return alert(
            `2항의 대출기간은 1개월 ~ 60개월(5년)사이를 선택해 주세요. 지금은 ${allMonth}개월이 선택되었습니다.`
          );
        }
        if (amountValue < 10 * 10000 || amountValue > 20000 * 10000) {
          return alert(`1항의 대출금액 입력범위는 최소 10만원 ~ 최대 20000만원(2억원) 입니다.`);
        }
        console.log(methodValue)
        if (methodValue === 1) {
          detail.classList.add(CLASS_NONE);
          //일시 상환일때
          console.log("1번이 작동");
          console.log(BASE_RATE)
          if (whetherValue === 1) {
            // 신협 최초대출 일때
            BASE_RATE = BASE_RATE - 0.005;
          }
          if (ratingValue === 2) {
            // 일반등급일떄
            BASE_RATE = BASE_RATE + 0.002;
          }
          if (changeValue === 2) {
            // 금리 6개월로 바꿀떄
            BASE_RATE = BASE_RATE + 0.001;
            
          }
          if (changeValue === 3) {
            // 금리 12개월로 바꿀떄
            BASE_RATE = BASE_RATE + 0.002;
          }
          if (changeValue === 4) {
            // 금리 고정으로 바꿀때
            BASE_RATE = BASE_RATE + 0.003;
          }
          console.log(BASE_RATE)
          console.log(Math.floor(BASE_RATE * 100 * 10)/10)
          const rateMoney =
            Math.round((((amountValue * BASE_RATE) / 365) * 30) / 10) * 10;
          const refundMoney = Math.round((amountValue * 0.0050) / 10) * 10;
          rate.innerText = `✔ 적용금리는 ${
            Math.floor(BASE_RATE * 100 * 10) / 10 === 3
              ? "3.0"
              : Math.ceil(BASE_RATE * 100 * 10)/10   // 금리적용이 다를 경우 "floor"또는 "ceil" 로 조정 요함. 
          }% 입니다`; // 곱하기 100은 금리 보기 쉽게 나타내려고 한거
          result.innerText = `▶ 월이자는 약 ${rateMoney.toLocaleString(
            "ko-kr"
          )}원입니다.`;
          dividend.innerText = `▶ 대출관련 이용고배당액으로 약 ${refundMoney.toLocaleString(
            "ko-kr"
          )}원을 받으실 수 있습니다.`;
        } else if (methodValue === 2) {
          detail.classList.remove(CLASS_NONE);
          // 분할상환일때
          BASE_RATE = BASE_RATE - 0.001;
          console.log("2번이 작동");
          if (whetherValue === 1) {
            // 신입교직원 최초대출
            BASE_RATE = BASE_RATE - 0.005;
          }
          if (ratingValue === 2) {
            // 일반등급일떄
            BASE_RATE = BASE_RATE + 0.002;
          }
          if (changeValue === 3) {
            // 금리 6개월로 바꿀떄
            BASE_RATE = BASE_RATE + 0.001;
          }
          if (changeValue === 3) {
            // 금리 12개월로 바꿀떄
            BASE_RATE = BASE_RATE + 0.002;
          }
          if (changeValue === 4) {
            // 금리 고정으로 바꿀때
            BASE_RATE = BASE_RATE + 0.003;
          }
          const refundMoney = Math.round((amountValue * 0.0050) / 2 / 10) * 10;
          const monthMoney = Math.round(amountValue / allMonth / 10) * 10;
          let rateMoney =
            Math.round((((amountValue * BASE_RATE) / 365) * 30) / 10) * 10;
          result.innerText = `▶ 월이자는 약${rateMoney.toLocaleString(
            "ko-kr"
          )}원, 월상환액은 약 ${monthMoney.toLocaleString(
            "ko-kr"
          )}원, 1개월차 원리금 합계액은 약 ${(monthMoney + rateMoney).toLocaleString(
            "ko-kr"
          )}원 입니다.`;
          const div = document.createElement("div");
          div.innerText = `1개월차 원리금은 약 ${(
            monthMoney + rateMoney
          ).toLocaleString("ko-kr")}원 `;
          aside.appendChild(div);
          for (let i = 2; i < allMonth + 1; i++) {
            amountValue = amountValue - monthMoney;
            rateMoney =
              Math.round((((amountValue * BASE_RATE) / 365) * 30) / 10) * 10;
            const div = document.createElement("div");
            div.innerText = `${i}개월차 원리금은 약 ${(
              monthMoney + rateMoney
            ).toLocaleString("ko-kr")} 원`;
            aside.appendChild(div);
          }
          rate.innerText = `✔ 적용금리는 ${
            Math.floor(BASE_RATE * 100 * 10) / 10 === 3
              ? "3.0"
              : Math.ceil(BASE_RATE * 100 * 10)/10
          }% 입니다`; // 곱하기 100은 금리 보기 쉽게 나타내려고 한거
          dividend.innerText = `✔ 대출관련 이용고배당으로 약 ${refundMoney.toLocaleString(
            "ko-kr"
          )}원을 받으실 수 있습니다.`;
        }
        window.scrollTo({ top: 1000, behavior: "smooth" });
      }

      const onOff = () => {
        if (detail.on === true) {
          detail.on = false;
          aside.classList.add(CLASS_NONE);
          detail.innerText = "☞ 회차별 원리금 조회하기";
        } else {
          window.scrollTo(0, -document.body.scrollHeight);
          detail.on = true;
          aside.classList.remove(CLASS_NONE);
          detail.innerText = "☞ 회차별 원리금 닫기";
        }
      };
      detail.addEventListener("click", onOff);
      form.addEventListener("submit", calculate);
    </script>
    <!--<script>
      alert("지금은 대출특판행사중입니다.  신규(추가)로 대출하실 경우 우대금리(-0.1%) 및 사은품 2종을 드립니다^^")
    </script>-->
    <script
      src="https://kit.fontawesome.com/6478f529f2.js"
      crossorigin="anonymous"
    ></script>
  </body>
</html>