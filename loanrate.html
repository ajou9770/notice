<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.8" />
    <title>월 대출 원리금 계산하기</title>
    <style>
body {
  display: flex;
  flex-direction: column;
  justify-content: center;
  background-color: ivory;
  vertical-align: middle;
  text-align: justify;
  margin-left: 20px;
  margin-right: 20px;
  margin-bottom: 20px;
}
.in {
  width: 30%;
  height: 50px;
  border-radius: 10px;
  font-size: 30px;
  font-weight: 500;
}
.in-term {
  width: 20%;
  border-radius: 10px;
  height: 50px;
  font-size: 30px;
  font-weight: 500;
}
.in-date {
  width: 20%;
  border-radius: 10px;
  height: 50px;
  font-size: 30px;
  font-weight: 500;
}
.in-year {
  width: 20%;
  border-radius: 10px;
  height: 50px;
  font-size: 30px;
  font-weight: 500;
}
.selectMethod {
  width: 35%;
  height: 50px;
  border-radius: 10px;
  font-size: 20px;
  font-weight: 600;
}
.level {
  width: 80%;
  height: 50px;
  border-radius: 10px;
  font-size: 20px;
  font-weight: 600;
}
.selectPp {
  width: 50%;
  border-radius: 10px;
  height: 50px;
  font-size: 20px;
  font-weight: 600;
}
.out {
  width: 30%;
  border-radius: 10px;
  border-width: 2px 6px 6px 2px;
  height: 55px;
  font-size: 25px;
  font-weight: 600;
}
.submit {
  margin-top: 20px;
  width: 400px;
  height: auto;
  display: flex;
  justify-content: center;
}
.outline {
  width: 400px;
  height: auto;
  display: flex;
  justify-content: center;
}
.dan {
  font-size: 30px;
  font-weight: 600;
}
.calin {
  height: auto;
  width: 400px;
  border-width: 6px 2px;
  border-color: teal blueviolet;
  border-style: solid;
  background-color:ivory;
  opacity: 0.8;
  padding-left: 10px;
  padding-right: 10px;
  padding-top: 10px;
  border-radius: 10px;
}
.result {
  height: auto;
  width: 410px;
  color: blue;
  border-width: 5px 2px;
  border-color: teal wheat;
  border-style: solid;
  text-align: left;
  background-color: whitesmoke;
  opacity: 0.8;
  padding-left: 10px;
  border-radius: 10px;
}
.resultmile {
  height: auto;
  width: 410px;
  color: chocolate;
  font-size: 25px;
  border-width: 5px 2px;
  border-color: teal wheat;
  border-style: solid;
  text-align: left;
  background-color: whitesmoke;
  opacity: 0.8;
  padding-left: 10px;
  border-radius: 10px;
}
.title {
  height: auto;
  width: 400px;
  border-width: 6px 2px;
  border-color: teal wheat;
  border-style: solid;
  padding-top: 5px;
  padding-bottom: 5px;
  text-align: center;
  font-size: 30px;
  font-weight: 600;
  background-color:ivory;
  opacity: 0.8;
  padding-left: 10px;
  border-radius: 10px;
}
.mile a {
  color: white;
  text-decoration: none;
  font-weight: 700;
  font-size: 25px;
}
.loaninsu a {
  color: white;
  text-decoration: none;
  font-weight: 700;
  font-size: 20px;
}
.mile {
  background-color: darkcyan;
  text-align: center;
  justify-content: center;
  align-items: center;
  padding-top: 5px;
  padding-bottom: 5px;
  border-radius: 10px;
  opacity: 0.8;
  height: auto;
  width: 350px;
  font-size: 10px;
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  font-weight: 700;
  color: snow;
  margin-bottom: 5px;
}
.loaninsu {
  background-color:indianred;
  text-align: center;
  justify-content: center;
  align-items: center;
  padding-top: 5px;
  padding-bottom: 5px;
  border-radius: 10px;
  opacity: 0.8;
  height: auto;
  width: 350px;
  font-size: 20px;
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  font-weight: 700;
  color: snow;
  margin-bottom: 5px;
}
.out:hover {
  opacity: 0.7;
}
.total_money_watch {
  cursor: pointer;
  font-size: 20px;
}
.total_money_watch:hover {
  font-size: 25px;
  text-decoration: underline;
}
.seetermrate {
 display: flex;
 width: 380px;
 font-weight: 600;
 color: blue;
 height: auto;
 border-width: 1px 1px;
 border-style: solid;
 border-color: whitesmoke;
 margin-right: 10px;
 align-items: center;
 justify-content: center;
}
.total_money_modal {
  position: absolute;
  padding-left: 10px;
  top: 300px;
  font-size:x-large;
  width: 400px;
  height: 800px;
  overflow-y: scroll;
  background-color: aliceblue;
  z-index: 1;
}
.none {
  display: none;
}  
  </style>
  </head>
  <body>
    <div class="none total_money_modal">
      <div class="icon">
      </div>
    </div>
    <div class="title">월 대출 상환원리금 및<br/>이용고배당 예시 </div>
    <h3>
      ☞ 이자는 최저(우대)금리 (2.6% ~ 3.1%, 2021.9.6기준)<br />
         ✅ 12개월 변동 +0.1%/ 고정금리:+0.2%)<br/>
    </h3>
    <div class="calin">
      <h2>1.대출금액을 입력하세요</h2>
      <form>
        <input class="in" type="number" required /><span class="dan">
          만원</span
        >
        <h2><span>2.대출기간을 선택해 주세요</span></h2>
        <select class="in-year" style="height: 50px">
          <option value="0">0</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
        </select>
        <span class="dan">년</span>
        <select class="in-date" style="height: 50px">
          <option value="0">0</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
          <option value="7">7</option>
          <option value="8">8</option>
          <option value="9">9</option>
          <option value="10">10</option>
          <option value="11">11</option>
        </select>
        <span class="dan">개월</span>
        <h2>3.상환 방법 및 최초대출 여부를 선택하세요.</h2>
        <select class="selectMethod" style="height: 50px">
          <option value="1">일시상환</option>
          <option value="2">분할상환(0.1%우대)</option>
        </select>
        <select class="selectPp" style="height: 50px">
          <option value="1">최초대출(0.2%우대)</option>
          <option value="2">해당없음(기대출이력 있음)</option>
        </select>
        <h2>4.본인의 개인신용평점을 선택하세요.</h2>
        <select class="level" style="height: 50px">
          <option value="1">우수등급/평점 880점 ~ 1,000점</option>
          <option value="2">일반등급/평점 740점 ~ 879점</option>
        </select>
        <div class="outline">
        <div class="submit">
          <input class="out" value=계산하기 type="submit" />
        </div>
        </div>
        <h3 class="mark_one">
          ※ 산출된 금액은 참고용으로, 실제 적용금리는 신용등급(평점), 월일수 등에 따라 변경 될 수 있습니다.</h3>
      </form>
    </div>
    <div class="result">
      <h1 style="margin-bottom:0; font-size: 25px;"></h1>
      <h1 style="margin-bottom:0; font-size: 25px;"></h1><br/>
      </div><br/><br/>
      <div class="seetermrate">
        <span class="none total_money_watch">▶회차별 원리금 보기◀</span><br/><br/></div><br/>
        </div>
      <h1 class="resultmile"></h1>
        <h3 class="mark_three">
      ※ 대출기간이 1년미만이거나, 중도상환할 경우 이용고 배당 금액은 달라 질 수 있습니다.<br/>
      ※ 이용고배당은 대출금평잔과 대출관련 기타이용 실적이 포함되어 지급됩니다.
    </h3>
    <div class="loaninsu">
    <a href="http://ajou9770.github.io/notice/loaninsu.html">
       보증대출 보증보험료 조회하기<i class="fas fa-chevron-right fa-lg"></i>
    </a></div>
    <div class="mile">
      <a href="http://ajou9770.github.io/usertip/loan.html">
        <i class="fas fa-chevron-left fa-lg"></i> 이전화면 돌아가기
      </a>
    </div>
    <script
      src="https://kit.fontawesome.com/6478f529f2.js"
      crossorigin="anonymous"
    ></script>

<script>
const whatMoney = document.querySelector(".result h1:nth-child(1)");
const hOne = document.querySelector(".result h1:nth-child(2)");
const hTwo = document.querySelector(".resultmile");
const calInput = document.querySelector(".in");
const calForm = document.querySelector("form");
const sum = document.querySelector(".submit");
const year = document.querySelector(".in-year");
const date = document.querySelector(".in-date");
const selectOne = document.querySelector(".selectMethod");
const selectTwo = document.querySelector(".selectPp");
const modal = document.querySelector(".total_money_modal");
const modalFont = document.querySelector(".total_money_watch");
const icon = document.querySelector(".icon");
const level = document.querySelector(".level");
const BASE_NUM = 0.029;
const markOne = document.querySelector(".mark_one");
const markTwo = document.querySelector(".mark_two");
const markThree = document.querySelector(".mark_three");
const whatYouCal = document.querySelector(".whatYouCal");

function cal(event) {
  event.preventDefault();
  let oneValue = calInput.value * 10000;
  const twoValueYear = parseInt(year.value) * 12;
  const twoValueDate = parseInt(date.value);
  const twoValue = twoValueYear + twoValueDate;
  const threeValue = selectOne.value;
  const fourValue = selectTwo.value;

  let firstValue = Math.round(oneValue / twoValue / 10) * 10;
  let secondValue = Math.round((((oneValue * BASE_NUM) / 365) * 30) / 10) * 10;
  let thirdValue = Math.round((oneValue * 0.0045) / 2 / 10) * 10;

  if (calInput.value < 100 || calInput.value > 20000) {
    return alert("최소 대출 금액은 100만원 최대 대출 금액은 2억원 입니다~~👌");
  }

  if (twoValue < 1) {
    return alert("대출 기간을 선택해 주세요~~😜");
  }

  if (parseInt(threeValue) === 1) {
    modalFont.classList.add("none");
    firstValue = 0;
    thirdValue = Math.round((thirdValue * 2) / 10) * 10;
  }
  if(parseInt(threeValue)===2 && parseInt(fourValue)===1 && parseInt(level.value)===1){
    secondValue = Math.round((((oneValue * (BASE_NUM-0.003)) / 365) * 30) / 10) * 10;
    whatMoney.innerText = `✔적용금리는 2.6% 입니다.`;
  } else if(parseInt(threeValue)===2 && parseInt(fourValue)===2 && parseInt(level.value)===1){
    secondValue = Math.round((((oneValue * (BASE_NUM-0.001)) / 365) * 30) / 10) * 10;
    whatMoney.innerText = `✔적용금리는 2.8% 입니다.`;
  } else if(parseInt(threeValue)===2 && parseInt(fourValue)===1 && parseInt(level.value)===2){
    secondValue = Math.round((((oneValue * (BASE_NUM-0.001)) / 365) * 30) / 10) * 10;
    whatMoney.innerText = `✔적용금리는 2.8% 입니다.`;
  } else if(parseInt(threeValue)===2 && parseInt(fourValue)===2 && parseInt(level.value)===2){
    secondValue = Math.round((((oneValue * (BASE_NUM+0.001)) / 365) * 30) / 10) * 10;
    whatMoney.innerText = `✔적용금리는 3.0% 입니다.`;
  }
  else if (parseInt(fourValue) === 1 && parseInt(level.value) === 2) {
    secondValue = Math.round((((oneValue * BASE_NUM) / 365) * 30) / 10) * 10;
    whatMoney.innerText = `✔적용금리는 2.9% 입니다.`;
  } else if (parseInt(fourValue) === 2 && parseInt(level.value) === 2) {
    secondValue =
      Math.round((((oneValue * (BASE_NUM + 0.002)) / 365) * 30) / 10) * 10;
    whatMoney.innerText = `✔적용금리는 3.1% 입니다.`;
  } else if (parseInt(fourValue) === 1 && parseInt(level.value) === 1) {
    secondValue =
      Math.round((((oneValue * (BASE_NUM - 0.002)) / 365) * 30) / 10) * 10;
    whatMoney.innerText = `✔적용금리는 2.7% 입니다.`;
  } else {
    secondValue = Math.round((((oneValue * BASE_NUM) / 365) * 30) / 10) * 10;
    whatMoney.innerText = `✔적용금리는 2.9% 입니다.`;
  }
  if (twoValue > 60) {
    hOne.innerHTML = `대출기간은 최장 5년까지 입니다. 입력하신 대츨 기간은 ${year.value}년 ${twoValueDate}개월 입니다. 5년 이내로 입력해 주세요~~😜`;
    window.scrollTo(0, document.body.scrollHeight);
  } else {
    hOne.innerHTML = `☞ 월분할상환원금 ${firstValue.toLocaleString(
      "ko-KR"
    )} 원, 월이자는 약 ${secondValue.toLocaleString(
      "ko-KR"
    )} 원 입니다. [1회차 원리금 합계액은 약 ${(
      firstValue + secondValue
    ).toLocaleString("ko-KR")} 원 입니다.]`;
    hTwo.innerHTML = `☞ 대출관련 이용고배당으로 매년(2월) 환급되는 금액은 약 ${thirdValue.toLocaleString(
      "ko-KR"
    )} 원으로 예상 됩니다.`;
    window.scrollTo(0, document.body.scrollHeight);
  }
  modal.innerHTML = "";
  if (parseInt(threeValue) === 2) {
    const div = document.createElement("div");
    const span = document.createElement("span");
    span.innerText = `1개월차 약  ${(firstValue + secondValue).toLocaleString(
      "ko-KR"
    )}원`;
    div.appendChild(span);
    modal.appendChild(div);
    modalFont.classList.remove("none");
    for (var i = 2; i < twoValue + 1; i++) {
      let number = i;
      oneValue = oneValue - firstValue;
      if (parseInt(fourValue) === 2 && parseInt(level.value) === 2) {
        let money = firstValue + ((oneValue * 0.030) / 365) * 30;
        let cleanMoney = Math.round(money / 10) * 10;
        const div = document.createElement("div");
        const span = document.createElement("span");
        span.innerText = `${number}개월차 약  ${cleanMoney.toLocaleString(
          "ko-KR"
        )}원`;
        div.appendChild(span);
        modal.appendChild(div);
      } else if (parseInt(fourValue) === 1 && parseInt(level.value) === 1) {
        let money = firstValue + ((oneValue * 0.026) / 365) * 30;
        let cleanMoney = Math.round(money / 10) * 10;
        const div = document.createElement("div");
        const span = document.createElement("span");
        span.innerText = `${number}개월차 약  ${cleanMoney.toLocaleString(
          "ko-KR"
        )}원`;
        div.appendChild(span);
        modal.appendChild(div);
      } else {
        let money = firstValue + ((oneValue * 0.028) / 365) * 30;
        let cleanMoney = Math.round(money / 10) * 10;
        const div = document.createElement("div");
        const span = document.createElement("span");
        span.innerText = `${number}개월차 약  ${cleanMoney.toLocaleString(
          "ko-KR"
        )}원`;
        div.appendChild(span);
        modal.appendChild(div);
      }
    }
  }
}
icon.addEventListener("click", () => {
  modal.classList.add("none");
});
modalFont.addEventListener("click", () => {
  if (modalFont.innerText === "▶회차별 원리금 보기◀") {
    modal.classList.remove("none");
    modalFont.innerText = "▶회차별 원리금 닫기◀";
  } else {
    modal.classList.add("none");
    modalFont.innerText = "▶회차별 원리금 보기◀";
  }
});
calForm.addEventListener("submit", cal);</script>
<script>
  alert("✔ 대략적인 금리 및 원리금을 조회할 수 있으며, ✔실제 적용금리는 우대조건에 따라 달라질 수 있습니다.")
</script>
  </body>
</html>